   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"usbh_usr.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.global	Command_index
  19              		.section	.bss.Command_index,"aw",%nobits
  22              	Command_index:
  23 0000 00       		.space	1
  24              		.comm	fatfs,1072,4
  25              		.comm	file,1060,4
  26              		.comm	fileR,1060,4
  27              		.comm	dir,28,4
  28              		.comm	fno,24,4
  29              		.global	USR_Callbacks
  30              		.section	.data.USR_Callbacks,"aw",%progbits
  31              		.align	2
  34              	USR_Callbacks:
  35 0000 00000000 		.word	USBH_USR_Init
  36 0004 00000000 		.word	USBH_USR_DeInit
  37 0008 00000000 		.word	USBH_USR_DeviceAttached
  38 000c 00000000 		.word	USBH_USR_ResetDevice
  39 0010 00000000 		.word	USBH_USR_DeviceDisconnected
  40 0014 00000000 		.word	USBH_USR_OverCurrentDetected
  41 0018 00000000 		.word	USBH_USR_DeviceSpeedDetected
  42 001c 00000000 		.word	USBH_USR_Device_DescAvailable
  43 0020 00000000 		.word	USBH_USR_DeviceAddressAssigned
  44 0024 00000000 		.word	USBH_USR_Configuration_DescAvailable
  45 0028 00000000 		.word	USBH_USR_Manufacturer_String
  46 002c 00000000 		.word	USBH_USR_Product_String
  47 0030 00000000 		.word	USBH_USR_SerialNum_String
  48 0034 00000000 		.word	USBH_USR_EnumerationDone
  49 0038 00000000 		.word	USBH_USR_UserInput
  50 003c 00000000 		.word	USBH_USR_MSC_Application
  51 0040 00000000 		.word	USBH_USR_DeviceNotSupported
  52 0044 00000000 		.word	USBH_USR_UnrecoveredError
  53              		.global	joystick_use
  54              		.section	.bss.joystick_use,"aw",%nobits
  57              	joystick_use:
  58 0000 00       		.space	1
  59              		.global	lcdLineNo
  60              		.section	.bss.lcdLineNo,"aw",%nobits
  63              	lcdLineNo:
  64 0000 00       		.space	1
  65              		.section	.bss.USBH_USR_ApplicationState,"aw",%nobits
  68              	USBH_USR_ApplicationState:
  69 0000 00       		.space	1
  70              		.section	.text.USBH_USR_Init,"ax",%progbits
  71              		.align	2
  72              		.global	USBH_USR_Init
  73              		.thumb
  74              		.thumb_func
  76              	USBH_USR_Init:
  77              	.LFB110:
  78              		.file 1 "../src/usbh_usr.c"
   1:../src/usbh_usr.c **** /**
   2:../src/usbh_usr.c ****   ******************************************************************************
   3:../src/usbh_usr.c ****   * @file    Audio_playback_and_record/src/usbh_usr.c
   4:../src/usbh_usr.c ****   * @author  MCD Application Team
   5:../src/usbh_usr.c ****   * @version V1.0.0
   6:../src/usbh_usr.c ****   * @date    28-October-2011
   7:../src/usbh_usr.c ****   * @brief   This file includes the usb host user callbacks
   8:../src/usbh_usr.c ****   ******************************************************************************
   9:../src/usbh_usr.c ****   * @attention
  10:../src/usbh_usr.c ****   *
  11:../src/usbh_usr.c ****   * THE PRESENT FIRMWARE WHICH IS FOR GUIDANCE ONLY AIMS AT PROVIDING CUSTOMERS
  12:../src/usbh_usr.c ****   * WITH CODING INFORMATION REGARDING THEIR PRODUCTS IN ORDER FOR THEM TO SAVE
  13:../src/usbh_usr.c ****   * TIME. AS A RESULT, STMICROELECTRONICS SHALL NOT BE HELD LIABLE FOR ANY
  14:../src/usbh_usr.c ****   * DIRECT, INDIRECT OR CONSEQUENTIAL DAMAGES WITH RESPECT TO ANY CLAIMS ARISING
  15:../src/usbh_usr.c ****   * FROM THE CONTENT OF SUCH FIRMWARE AND/OR THE USE MADE BY CUSTOMERS OF THE
  16:../src/usbh_usr.c ****   * CODING INFORMATION CONTAINED HEREIN IN CONNECTION WITH THEIR PRODUCTS.
  17:../src/usbh_usr.c ****   *
  18:../src/usbh_usr.c ****   * <h2><center>&copy; COPYRIGHT 2011 STMicroelectronics</center></h2>
  19:../src/usbh_usr.c ****   ******************************************************************************
  20:../src/usbh_usr.c ****   */
  21:../src/usbh_usr.c **** 
  22:../src/usbh_usr.c **** /* Includes ------------------------------------------------------------------*/
  23:../src/usbh_usr.c **** #include "usbh_usr.h"
  24:../src/usbh_usr.c **** #include "stm32f4xx_it.h"
  25:../src/usbh_usr.c **** 
  26:../src/usbh_usr.c **** /** @addtogroup STM32F4-Discovery_Audio_Player_Recorder
  27:../src/usbh_usr.c ****   * @{
  28:../src/usbh_usr.c ****   */
  29:../src/usbh_usr.c **** 
  30:../src/usbh_usr.c **** /* External variables --------------------------------------------------------*/
  31:../src/usbh_usr.c **** /* Private typedef -----------------------------------------------------------*/
  32:../src/usbh_usr.c **** /* Private defines -----------------------------------------------------------*/
  33:../src/usbh_usr.c **** /* Private macros ------------------------------------------------------------*/
  34:../src/usbh_usr.c **** /* Private variables ---------------------------------------------------------*/
  35:../src/usbh_usr.c **** __IO uint8_t Command_index = 0;
  36:../src/usbh_usr.c **** /*  Points to the DEVICE_PROP structure of current device */
  37:../src/usbh_usr.c **** /*  The purpose of this register is to speed up the execution */
  38:../src/usbh_usr.c **** FATFS fatfs;
  39:../src/usbh_usr.c **** FIL file;
  40:../src/usbh_usr.c **** FIL fileR;
  41:../src/usbh_usr.c **** DIR dir;
  42:../src/usbh_usr.c **** FILINFO fno;
  43:../src/usbh_usr.c **** 
  44:../src/usbh_usr.c **** USBH_Usr_cb_TypeDef USR_Callbacks =
  45:../src/usbh_usr.c **** {
  46:../src/usbh_usr.c ****   USBH_USR_Init,
  47:../src/usbh_usr.c ****   USBH_USR_DeInit,
  48:../src/usbh_usr.c ****   USBH_USR_DeviceAttached,
  49:../src/usbh_usr.c ****   USBH_USR_ResetDevice,
  50:../src/usbh_usr.c ****   USBH_USR_DeviceDisconnected,
  51:../src/usbh_usr.c ****   USBH_USR_OverCurrentDetected,
  52:../src/usbh_usr.c ****   USBH_USR_DeviceSpeedDetected,
  53:../src/usbh_usr.c ****   USBH_USR_Device_DescAvailable,
  54:../src/usbh_usr.c ****   USBH_USR_DeviceAddressAssigned,
  55:../src/usbh_usr.c ****   USBH_USR_Configuration_DescAvailable,
  56:../src/usbh_usr.c ****   USBH_USR_Manufacturer_String,
  57:../src/usbh_usr.c ****   USBH_USR_Product_String,
  58:../src/usbh_usr.c ****   USBH_USR_SerialNum_String,
  59:../src/usbh_usr.c ****   USBH_USR_EnumerationDone,
  60:../src/usbh_usr.c ****   USBH_USR_UserInput,
  61:../src/usbh_usr.c ****   USBH_USR_MSC_Application,
  62:../src/usbh_usr.c ****   USBH_USR_DeviceNotSupported,
  63:../src/usbh_usr.c ****   USBH_USR_UnrecoveredError
  64:../src/usbh_usr.c **** };
  65:../src/usbh_usr.c **** 
  66:../src/usbh_usr.c **** extern USB_OTG_CORE_HANDLE          USB_OTG_Core;
  67:../src/usbh_usr.c **** extern __IO uint8_t AudioPlayStart ;
  68:../src/usbh_usr.c **** uint8_t joystick_use = 0x00;
  69:../src/usbh_usr.c **** uint8_t lcdLineNo = 0x00;
  70:../src/usbh_usr.c **** extern __IO uint8_t RepeatState ;
  71:../src/usbh_usr.c **** extern __IO uint8_t LED_Toggle;
  72:../src/usbh_usr.c **** static uint8_t USBH_USR_ApplicationState = USH_USR_FS_INIT;
  73:../src/usbh_usr.c **** extern __IO uint32_t WaveDataLength ;
  74:../src/usbh_usr.c **** extern __IO uint16_t Time_Rec_Base;
  75:../src/usbh_usr.c **** 
  76:../src/usbh_usr.c **** /* Private function prototypes -----------------------------------------------*/
  77:../src/usbh_usr.c **** /* Private functions ---------------------------------------------------------*/
  78:../src/usbh_usr.c **** 
  79:../src/usbh_usr.c **** 
  80:../src/usbh_usr.c **** /**
  81:../src/usbh_usr.c ****   * @brief  USBH_USR_Init
  82:../src/usbh_usr.c ****   * @param  None
  83:../src/usbh_usr.c ****   * @retval None
  84:../src/usbh_usr.c ****   */
  85:../src/usbh_usr.c **** void USBH_USR_Init(void)
  86:../src/usbh_usr.c **** {
  79              		.loc 1 86 0
  80              		.cfi_startproc
  81              		@ args = 0, pretend = 0, frame = 0
  82              		@ frame_needed = 1, uses_anonymous_args = 0
  83              		@ link register save eliminated.
  84 0000 80B4     		push	{r7}
  85              	.LCFI0:
  86              		.cfi_def_cfa_offset 4
  87              		.cfi_offset 7, -4
  88 0002 00AF     		add	r7, sp, #0
  89              	.LCFI1:
  90              		.cfi_def_cfa_register 7
  87:../src/usbh_usr.c **** }
  91              		.loc 1 87 0
  92 0004 BD46     		mov	sp, r7
  93 0006 80BC     		pop	{r7}
  94 0008 7047     		bx	lr
  95              		.cfi_endproc
  96              	.LFE110:
  98 000a 00BF     		.section	.text.USBH_USR_DeviceAttached,"ax",%progbits
  99              		.align	2
 100              		.global	USBH_USR_DeviceAttached
 101              		.thumb
 102              		.thumb_func
 104              	USBH_USR_DeviceAttached:
 105              	.LFB111:
  88:../src/usbh_usr.c **** 
  89:../src/usbh_usr.c **** /**
  90:../src/usbh_usr.c ****   * @brief  USBH_USR_DeviceAttached
  91:../src/usbh_usr.c ****   * @param  None
  92:../src/usbh_usr.c ****   * @retval None
  93:../src/usbh_usr.c ****   */
  94:../src/usbh_usr.c **** void USBH_USR_DeviceAttached(void)
  95:../src/usbh_usr.c **** {
 106              		.loc 1 95 0
 107              		.cfi_startproc
 108              		@ args = 0, pretend = 0, frame = 0
 109              		@ frame_needed = 1, uses_anonymous_args = 0
 110 0000 80B5     		push	{r7, lr}
 111              	.LCFI2:
 112              		.cfi_def_cfa_offset 8
 113              		.cfi_offset 14, -4
 114              		.cfi_offset 7, -8
 115 0002 00AF     		add	r7, sp, #0
 116              	.LCFI3:
 117              		.cfi_def_cfa_register 7
  96:../src/usbh_usr.c ****   RepeatState = 0;
 118              		.loc 1 96 0
 119 0004 40F20003 		movw	r3, #:lower16:RepeatState
 120 0008 C0F20003 		movt	r3, #:upper16:RepeatState
 121 000c 4FF00002 		mov	r2, #0
 122 0010 1A70     		strb	r2, [r3, #0]
  97:../src/usbh_usr.c ****   
  98:../src/usbh_usr.c ****   LED_Toggle = 7;
 123              		.loc 1 98 0
 124 0012 40F20003 		movw	r3, #:lower16:LED_Toggle
 125 0016 C0F20003 		movt	r3, #:upper16:LED_Toggle
 126 001a 4FF00702 		mov	r2, #7
 127 001e 1A70     		strb	r2, [r3, #0]
  99:../src/usbh_usr.c ****   /* Red LED off when device attached */
 100:../src/usbh_usr.c ****   STM_EVAL_LEDOff(LED5);
 128              		.loc 1 100 0
 129 0020 4FF00200 		mov	r0, #2
 130 0024 FFF7FEFF 		bl	STM_EVAL_LEDOff
 101:../src/usbh_usr.c ****   /* Green LED on */
 102:../src/usbh_usr.c ****   STM_EVAL_LEDOn(LED4);
 131              		.loc 1 102 0
 132 0028 4FF00000 		mov	r0, #0
 133 002c FFF7FEFF 		bl	STM_EVAL_LEDOn
 103:../src/usbh_usr.c ****   /* TIM Interrupts enable */
 104:../src/usbh_usr.c ****   TIM_ITConfig(TIM4, TIM_IT_CC1, ENABLE);
 134              		.loc 1 104 0
 135 0030 4FF40060 		mov	r0, #2048
 136 0034 C4F20000 		movt	r0, 16384
 137 0038 4FF00201 		mov	r1, #2
 138 003c 4FF00102 		mov	r2, #1
 139 0040 FFF7FEFF 		bl	TIM_ITConfig
 105:../src/usbh_usr.c **** }
 140              		.loc 1 105 0
 141 0044 80BD     		pop	{r7, pc}
 142              		.cfi_endproc
 143              	.LFE111:
 145 0046 00BF     		.section	.text.USBH_USR_UnrecoveredError,"ax",%progbits
 146              		.align	2
 147              		.global	USBH_USR_UnrecoveredError
 148              		.thumb
 149              		.thumb_func
 151              	USBH_USR_UnrecoveredError:
 152              	.LFB112:
 106:../src/usbh_usr.c **** 
 107:../src/usbh_usr.c **** /**
 108:../src/usbh_usr.c ****   * @brief  USBH_USR_UnrecoveredError
 109:../src/usbh_usr.c ****   * @param  None
 110:../src/usbh_usr.c ****   * @retval None
 111:../src/usbh_usr.c ****   */
 112:../src/usbh_usr.c **** void USBH_USR_UnrecoveredError (void)
 113:../src/usbh_usr.c **** {
 153              		.loc 1 113 0
 154              		.cfi_startproc
 155              		@ args = 0, pretend = 0, frame = 0
 156              		@ frame_needed = 1, uses_anonymous_args = 0
 157              		@ link register save eliminated.
 158 0000 80B4     		push	{r7}
 159              	.LCFI4:
 160              		.cfi_def_cfa_offset 4
 161              		.cfi_offset 7, -4
 162 0002 00AF     		add	r7, sp, #0
 163              	.LCFI5:
 164              		.cfi_def_cfa_register 7
 114:../src/usbh_usr.c **** }
 165              		.loc 1 114 0
 166 0004 BD46     		mov	sp, r7
 167 0006 80BC     		pop	{r7}
 168 0008 7047     		bx	lr
 169              		.cfi_endproc
 170              	.LFE112:
 172 000a 00BF     		.section	.text.USBH_USR_DeviceDisconnected,"ax",%progbits
 173              		.align	2
 174              		.global	USBH_USR_DeviceDisconnected
 175              		.thumb
 176              		.thumb_func
 178              	USBH_USR_DeviceDisconnected:
 179              	.LFB113:
 115:../src/usbh_usr.c **** 
 116:../src/usbh_usr.c **** /**
 117:../src/usbh_usr.c ****   * @brief  USBH_DisconnectEvent
 118:../src/usbh_usr.c ****   *         Device disconnect event
 119:../src/usbh_usr.c ****   * @param  None
 120:../src/usbh_usr.c ****   * @retval Staus
 121:../src/usbh_usr.c ****   */
 122:../src/usbh_usr.c **** void USBH_USR_DeviceDisconnected (void)
 123:../src/usbh_usr.c **** {
 180              		.loc 1 123 0
 181              		.cfi_startproc
 182              		@ args = 0, pretend = 0, frame = 0
 183              		@ frame_needed = 1, uses_anonymous_args = 0
 184 0000 80B5     		push	{r7, lr}
 185              	.LCFI6:
 186              		.cfi_def_cfa_offset 8
 187              		.cfi_offset 14, -4
 188              		.cfi_offset 7, -8
 189 0002 00AF     		add	r7, sp, #0
 190              	.LCFI7:
 191              		.cfi_def_cfa_register 7
 124:../src/usbh_usr.c ****   /* Red Led on if the USB Key is removed */
 125:../src/usbh_usr.c ****   STM_EVAL_LEDOn(LED5);
 192              		.loc 1 125 0
 193 0004 4FF00200 		mov	r0, #2
 194 0008 FFF7FEFF 		bl	STM_EVAL_LEDOn
 126:../src/usbh_usr.c ****   /* Disable the Timer */
 127:../src/usbh_usr.c ****   TIM_ITConfig(TIM4, TIM_IT_CC1 , DISABLE);
 195              		.loc 1 127 0
 196 000c 4FF40060 		mov	r0, #2048
 197 0010 C4F20000 		movt	r0, 16384
 198 0014 4FF00201 		mov	r1, #2
 199 0018 4FF00002 		mov	r2, #0
 200 001c FFF7FEFF 		bl	TIM_ITConfig
 128:../src/usbh_usr.c **** 
 129:../src/usbh_usr.c ****   /* If USB key Removed when playing a wave */
 130:../src/usbh_usr.c ****   if( (WaveDataLength!=0)&& (Command_index != 1))
 201              		.loc 1 130 0
 202 0020 40F20003 		movw	r3, #:lower16:WaveDataLength
 203 0024 C0F20003 		movt	r3, #:upper16:WaveDataLength
 204 0028 1B68     		ldr	r3, [r3, #0]
 205 002a 002B     		cmp	r3, #0
 206 002c 10D0     		beq	.L5
 207              		.loc 1 130 0 is_stmt 0 discriminator 1
 208 002e 40F20003 		movw	r3, #:lower16:Command_index
 209 0032 C0F20003 		movt	r3, #:upper16:Command_index
 210 0036 1B78     		ldrb	r3, [r3, #0]
 211 0038 DBB2     		uxtb	r3, r3
 212 003a 012B     		cmp	r3, #1
 213 003c 08D0     		beq	.L5
 131:../src/usbh_usr.c ****   {
 132:../src/usbh_usr.c ****     WavePlayer_CallBack();
 214              		.loc 1 132 0 is_stmt 1
 215 003e FFF7FEFF 		bl	WavePlayer_CallBack
 133:../src/usbh_usr.c ****     Command_index = 0;
 216              		.loc 1 133 0
 217 0042 40F20003 		movw	r3, #:lower16:Command_index
 218 0046 C0F20003 		movt	r3, #:upper16:Command_index
 219 004a 4FF00002 		mov	r2, #0
 220 004e 1A70     		strb	r2, [r3, #0]
 221              	.L5:
 134:../src/usbh_usr.c ****   } 
 135:../src/usbh_usr.c ****   
 136:../src/usbh_usr.c ****   /* If USB key Removed when recording a wave */
 137:../src/usbh_usr.c ****   if(Command_index == 1)
 222              		.loc 1 137 0
 223 0050 40F20003 		movw	r3, #:lower16:Command_index
 224 0054 C0F20003 		movt	r3, #:upper16:Command_index
 225 0058 1B78     		ldrb	r3, [r3, #0]
 226 005a DBB2     		uxtb	r3, r3
 227 005c 012B     		cmp	r3, #1
 228 005e 1AD1     		bne	.L4
 138:../src/usbh_usr.c ****   {
 139:../src/usbh_usr.c ****     WaveRecorderStop();
 229              		.loc 1 139 0
 230 0060 FFF7FEFF 		bl	WaveRecorderStop
 140:../src/usbh_usr.c ****     STM_EVAL_LEDOff(LED3);
 231              		.loc 1 140 0
 232 0064 4FF00100 		mov	r0, #1
 233 0068 FFF7FEFF 		bl	STM_EVAL_LEDOff
 141:../src/usbh_usr.c ****     Command_index = 1;
 234              		.loc 1 141 0
 235 006c 40F20003 		movw	r3, #:lower16:Command_index
 236 0070 C0F20003 		movt	r3, #:upper16:Command_index
 237 0074 4FF00102 		mov	r2, #1
 238 0078 1A70     		strb	r2, [r3, #0]
 142:../src/usbh_usr.c ****     Time_Rec_Base = 0;
 239              		.loc 1 142 0
 240 007a 40F20003 		movw	r3, #:lower16:Time_Rec_Base
 241 007e C0F20003 		movt	r3, #:upper16:Time_Rec_Base
 242 0082 4FF00002 		mov	r2, #0
 243 0086 1A80     		strh	r2, [r3, #0]	@ movhi
 143:../src/usbh_usr.c ****     LED_Toggle = 7;
 244              		.loc 1 143 0
 245 0088 40F20003 		movw	r3, #:lower16:LED_Toggle
 246 008c C0F20003 		movt	r3, #:upper16:LED_Toggle
 247 0090 4FF00702 		mov	r2, #7
 248 0094 1A70     		strb	r2, [r3, #0]
 249              	.L4:
 144:../src/usbh_usr.c ****   }
 145:../src/usbh_usr.c **** }
 250              		.loc 1 145 0
 251 0096 80BD     		pop	{r7, pc}
 252              		.cfi_endproc
 253              	.LFE113:
 255              		.section	.text.USBH_USR_ResetDevice,"ax",%progbits
 256              		.align	2
 257              		.global	USBH_USR_ResetDevice
 258              		.thumb
 259              		.thumb_func
 261              	USBH_USR_ResetDevice:
 262              	.LFB114:
 146:../src/usbh_usr.c **** 
 147:../src/usbh_usr.c **** /**
 148:../src/usbh_usr.c ****   * @brief  USBH_USR_ResetUSBDevice
 149:../src/usbh_usr.c ****   * @param  None
 150:../src/usbh_usr.c ****   * @retval None
 151:../src/usbh_usr.c ****   */
 152:../src/usbh_usr.c **** void USBH_USR_ResetDevice(void)
 153:../src/usbh_usr.c **** {
 263              		.loc 1 153 0
 264              		.cfi_startproc
 265              		@ args = 0, pretend = 0, frame = 0
 266              		@ frame_needed = 1, uses_anonymous_args = 0
 267              		@ link register save eliminated.
 268 0000 80B4     		push	{r7}
 269              	.LCFI8:
 270              		.cfi_def_cfa_offset 4
 271              		.cfi_offset 7, -4
 272 0002 00AF     		add	r7, sp, #0
 273              	.LCFI9:
 274              		.cfi_def_cfa_register 7
 154:../src/usbh_usr.c ****   /* callback for USB-Reset */
 155:../src/usbh_usr.c **** }
 275              		.loc 1 155 0
 276 0004 BD46     		mov	sp, r7
 277 0006 80BC     		pop	{r7}
 278 0008 7047     		bx	lr
 279              		.cfi_endproc
 280              	.LFE114:
 282 000a 00BF     		.section	.text.USBH_USR_DeviceSpeedDetected,"ax",%progbits
 283              		.align	2
 284              		.global	USBH_USR_DeviceSpeedDetected
 285              		.thumb
 286              		.thumb_func
 288              	USBH_USR_DeviceSpeedDetected:
 289              	.LFB115:
 156:../src/usbh_usr.c **** 
 157:../src/usbh_usr.c **** 
 158:../src/usbh_usr.c **** /**
 159:../src/usbh_usr.c ****   * @brief  USBH_USR_DeviceSpeedDetected
 160:../src/usbh_usr.c ****   *         Displays the message on LCD for device speed
 161:../src/usbh_usr.c ****   * @param  Device speed:
 162:../src/usbh_usr.c ****   * @retval None
 163:../src/usbh_usr.c ****   */
 164:../src/usbh_usr.c **** void USBH_USR_DeviceSpeedDetected(uint8_t DeviceSpeed)
 165:../src/usbh_usr.c **** {
 290              		.loc 1 165 0
 291              		.cfi_startproc
 292              		@ args = 0, pretend = 0, frame = 8
 293              		@ frame_needed = 1, uses_anonymous_args = 0
 294              		@ link register save eliminated.
 295 0000 80B4     		push	{r7}
 296              	.LCFI10:
 297              		.cfi_def_cfa_offset 4
 298              		.cfi_offset 7, -4
 299 0002 83B0     		sub	sp, sp, #12
 300              	.LCFI11:
 301              		.cfi_def_cfa_offset 16
 302 0004 00AF     		add	r7, sp, #0
 303              	.LCFI12:
 304              		.cfi_def_cfa_register 7
 305 0006 0346     		mov	r3, r0
 306 0008 FB71     		strb	r3, [r7, #7]
 166:../src/usbh_usr.c **** }
 307              		.loc 1 166 0
 308 000a 07F10C07 		add	r7, r7, #12
 309 000e BD46     		mov	sp, r7
 310 0010 80BC     		pop	{r7}
 311 0012 7047     		bx	lr
 312              		.cfi_endproc
 313              	.LFE115:
 315              		.section	.text.USBH_USR_Device_DescAvailable,"ax",%progbits
 316              		.align	2
 317              		.global	USBH_USR_Device_DescAvailable
 318              		.thumb
 319              		.thumb_func
 321              	USBH_USR_Device_DescAvailable:
 322              	.LFB116:
 167:../src/usbh_usr.c **** 
 168:../src/usbh_usr.c **** /**
 169:../src/usbh_usr.c ****   * @brief  USBH_USR_Device_DescAvailable
 170:../src/usbh_usr.c ****   * @param  device descriptor
 171:../src/usbh_usr.c ****   * @retval None
 172:../src/usbh_usr.c ****   */
 173:../src/usbh_usr.c **** void USBH_USR_Device_DescAvailable(void *DeviceDesc)
 174:../src/usbh_usr.c **** {
 323              		.loc 1 174 0
 324              		.cfi_startproc
 325              		@ args = 0, pretend = 0, frame = 8
 326              		@ frame_needed = 1, uses_anonymous_args = 0
 327              		@ link register save eliminated.
 328 0000 80B4     		push	{r7}
 329              	.LCFI13:
 330              		.cfi_def_cfa_offset 4
 331              		.cfi_offset 7, -4
 332 0002 83B0     		sub	sp, sp, #12
 333              	.LCFI14:
 334              		.cfi_def_cfa_offset 16
 335 0004 00AF     		add	r7, sp, #0
 336              	.LCFI15:
 337              		.cfi_def_cfa_register 7
 338 0006 7860     		str	r0, [r7, #4]
 175:../src/usbh_usr.c ****   /* callback for device descriptor */
 176:../src/usbh_usr.c **** }
 339              		.loc 1 176 0
 340 0008 07F10C07 		add	r7, r7, #12
 341 000c BD46     		mov	sp, r7
 342 000e 80BC     		pop	{r7}
 343 0010 7047     		bx	lr
 344              		.cfi_endproc
 345              	.LFE116:
 347 0012 00BF     		.section	.text.USBH_USR_DeviceAddressAssigned,"ax",%progbits
 348              		.align	2
 349              		.global	USBH_USR_DeviceAddressAssigned
 350              		.thumb
 351              		.thumb_func
 353              	USBH_USR_DeviceAddressAssigned:
 354              	.LFB117:
 177:../src/usbh_usr.c **** 
 178:../src/usbh_usr.c **** /**
 179:../src/usbh_usr.c ****   * @brief  USBH_USR_DeviceAddressAssigned
 180:../src/usbh_usr.c ****   *         USB device is successfully assigned the Address
 181:../src/usbh_usr.c ****   * @param  None
 182:../src/usbh_usr.c ****   * @retval None
 183:../src/usbh_usr.c ****   */
 184:../src/usbh_usr.c **** void USBH_USR_DeviceAddressAssigned(void)
 185:../src/usbh_usr.c **** {
 355              		.loc 1 185 0
 356              		.cfi_startproc
 357              		@ args = 0, pretend = 0, frame = 0
 358              		@ frame_needed = 1, uses_anonymous_args = 0
 359              		@ link register save eliminated.
 360 0000 80B4     		push	{r7}
 361              	.LCFI16:
 362              		.cfi_def_cfa_offset 4
 363              		.cfi_offset 7, -4
 364 0002 00AF     		add	r7, sp, #0
 365              	.LCFI17:
 366              		.cfi_def_cfa_register 7
 186:../src/usbh_usr.c ****   /* callback for device successfully assigned the Address */
 187:../src/usbh_usr.c **** }
 367              		.loc 1 187 0
 368 0004 BD46     		mov	sp, r7
 369 0006 80BC     		pop	{r7}
 370 0008 7047     		bx	lr
 371              		.cfi_endproc
 372              	.LFE117:
 374 000a 00BF     		.section	.text.USBH_USR_Configuration_DescAvailable,"ax",%progbits
 375              		.align	2
 376              		.global	USBH_USR_Configuration_DescAvailable
 377              		.thumb
 378              		.thumb_func
 380              	USBH_USR_Configuration_DescAvailable:
 381              	.LFB118:
 188:../src/usbh_usr.c **** 
 189:../src/usbh_usr.c **** /**
 190:../src/usbh_usr.c ****   * @brief  USBH_USR_Conf_Desc
 191:../src/usbh_usr.c ****   * @param  Configuration descriptor
 192:../src/usbh_usr.c ****   * @retval None
 193:../src/usbh_usr.c ****   */
 194:../src/usbh_usr.c **** void USBH_USR_Configuration_DescAvailable(USBH_CfgDesc_TypeDef * cfgDesc,
 195:../src/usbh_usr.c ****     USBH_InterfaceDesc_TypeDef *itfDesc,
 196:../src/usbh_usr.c ****     USBH_EpDesc_TypeDef *epDesc)
 197:../src/usbh_usr.c **** {
 382              		.loc 1 197 0
 383              		.cfi_startproc
 384              		@ args = 0, pretend = 0, frame = 16
 385              		@ frame_needed = 1, uses_anonymous_args = 0
 386              		@ link register save eliminated.
 387 0000 80B4     		push	{r7}
 388              	.LCFI18:
 389              		.cfi_def_cfa_offset 4
 390              		.cfi_offset 7, -4
 391 0002 85B0     		sub	sp, sp, #20
 392              	.LCFI19:
 393              		.cfi_def_cfa_offset 24
 394 0004 00AF     		add	r7, sp, #0
 395              	.LCFI20:
 396              		.cfi_def_cfa_register 7
 397 0006 F860     		str	r0, [r7, #12]
 398 0008 B960     		str	r1, [r7, #8]
 399 000a 7A60     		str	r2, [r7, #4]
 198:../src/usbh_usr.c ****   /* callback for configuration descriptor */
 199:../src/usbh_usr.c **** }
 400              		.loc 1 199 0
 401 000c 07F11407 		add	r7, r7, #20
 402 0010 BD46     		mov	sp, r7
 403 0012 80BC     		pop	{r7}
 404 0014 7047     		bx	lr
 405              		.cfi_endproc
 406              	.LFE118:
 408 0016 00BF     		.section	.text.USBH_USR_Manufacturer_String,"ax",%progbits
 409              		.align	2
 410              		.global	USBH_USR_Manufacturer_String
 411              		.thumb
 412              		.thumb_func
 414              	USBH_USR_Manufacturer_String:
 415              	.LFB119:
 200:../src/usbh_usr.c **** 
 201:../src/usbh_usr.c **** /**
 202:../src/usbh_usr.c ****   * @brief  USBH_USR_Manufacturer_String
 203:../src/usbh_usr.c ****   * @param  Manufacturer String
 204:../src/usbh_usr.c ****   * @retval None
 205:../src/usbh_usr.c ****   */
 206:../src/usbh_usr.c **** void USBH_USR_Manufacturer_String(void *ManufacturerString)
 207:../src/usbh_usr.c **** {
 416              		.loc 1 207 0
 417              		.cfi_startproc
 418              		@ args = 0, pretend = 0, frame = 8
 419              		@ frame_needed = 1, uses_anonymous_args = 0
 420              		@ link register save eliminated.
 421 0000 80B4     		push	{r7}
 422              	.LCFI21:
 423              		.cfi_def_cfa_offset 4
 424              		.cfi_offset 7, -4
 425 0002 83B0     		sub	sp, sp, #12
 426              	.LCFI22:
 427              		.cfi_def_cfa_offset 16
 428 0004 00AF     		add	r7, sp, #0
 429              	.LCFI23:
 430              		.cfi_def_cfa_register 7
 431 0006 7860     		str	r0, [r7, #4]
 208:../src/usbh_usr.c ****   /* callback for  Manufacturer String */
 209:../src/usbh_usr.c **** }
 432              		.loc 1 209 0
 433 0008 07F10C07 		add	r7, r7, #12
 434 000c BD46     		mov	sp, r7
 435 000e 80BC     		pop	{r7}
 436 0010 7047     		bx	lr
 437              		.cfi_endproc
 438              	.LFE119:
 440 0012 00BF     		.section	.text.USBH_USR_Product_String,"ax",%progbits
 441              		.align	2
 442              		.global	USBH_USR_Product_String
 443              		.thumb
 444              		.thumb_func
 446              	USBH_USR_Product_String:
 447              	.LFB120:
 210:../src/usbh_usr.c **** 
 211:../src/usbh_usr.c **** /**
 212:../src/usbh_usr.c ****   * @brief  USBH_USR_Product_String
 213:../src/usbh_usr.c ****   * @param  Product String
 214:../src/usbh_usr.c ****   * @retval None
 215:../src/usbh_usr.c ****   */
 216:../src/usbh_usr.c **** void USBH_USR_Product_String(void *ProductString)
 217:../src/usbh_usr.c **** {
 448              		.loc 1 217 0
 449              		.cfi_startproc
 450              		@ args = 0, pretend = 0, frame = 8
 451              		@ frame_needed = 1, uses_anonymous_args = 0
 452              		@ link register save eliminated.
 453 0000 80B4     		push	{r7}
 454              	.LCFI24:
 455              		.cfi_def_cfa_offset 4
 456              		.cfi_offset 7, -4
 457 0002 83B0     		sub	sp, sp, #12
 458              	.LCFI25:
 459              		.cfi_def_cfa_offset 16
 460 0004 00AF     		add	r7, sp, #0
 461              	.LCFI26:
 462              		.cfi_def_cfa_register 7
 463 0006 7860     		str	r0, [r7, #4]
 218:../src/usbh_usr.c ****   /* callback for Product String */
 219:../src/usbh_usr.c **** }
 464              		.loc 1 219 0
 465 0008 07F10C07 		add	r7, r7, #12
 466 000c BD46     		mov	sp, r7
 467 000e 80BC     		pop	{r7}
 468 0010 7047     		bx	lr
 469              		.cfi_endproc
 470              	.LFE120:
 472 0012 00BF     		.section	.text.USBH_USR_SerialNum_String,"ax",%progbits
 473              		.align	2
 474              		.global	USBH_USR_SerialNum_String
 475              		.thumb
 476              		.thumb_func
 478              	USBH_USR_SerialNum_String:
 479              	.LFB121:
 220:../src/usbh_usr.c **** 
 221:../src/usbh_usr.c **** /**
 222:../src/usbh_usr.c ****   * @brief  USBH_USR_SerialNum_String
 223:../src/usbh_usr.c ****   * @param  SerialNum_String
 224:../src/usbh_usr.c ****   * @retval None
 225:../src/usbh_usr.c ****   */
 226:../src/usbh_usr.c **** void USBH_USR_SerialNum_String(void *SerialNumString)
 227:../src/usbh_usr.c **** {
 480              		.loc 1 227 0
 481              		.cfi_startproc
 482              		@ args = 0, pretend = 0, frame = 8
 483              		@ frame_needed = 1, uses_anonymous_args = 0
 484              		@ link register save eliminated.
 485 0000 80B4     		push	{r7}
 486              	.LCFI27:
 487              		.cfi_def_cfa_offset 4
 488              		.cfi_offset 7, -4
 489 0002 83B0     		sub	sp, sp, #12
 490              	.LCFI28:
 491              		.cfi_def_cfa_offset 16
 492 0004 00AF     		add	r7, sp, #0
 493              	.LCFI29:
 494              		.cfi_def_cfa_register 7
 495 0006 7860     		str	r0, [r7, #4]
 228:../src/usbh_usr.c ****   /* callback for SerialNum_String */
 229:../src/usbh_usr.c **** }
 496              		.loc 1 229 0
 497 0008 07F10C07 		add	r7, r7, #12
 498 000c BD46     		mov	sp, r7
 499 000e 80BC     		pop	{r7}
 500 0010 7047     		bx	lr
 501              		.cfi_endproc
 502              	.LFE121:
 504 0012 00BF     		.section	.text.USBH_USR_EnumerationDone,"ax",%progbits
 505              		.align	2
 506              		.global	USBH_USR_EnumerationDone
 507              		.thumb
 508              		.thumb_func
 510              	USBH_USR_EnumerationDone:
 511              	.LFB122:
 230:../src/usbh_usr.c **** 
 231:../src/usbh_usr.c **** /**
 232:../src/usbh_usr.c ****   * @brief  EnumerationDone 
 233:../src/usbh_usr.c ****   *         User response request is displayed to ask application jump to class
 234:../src/usbh_usr.c ****   * @param  None
 235:../src/usbh_usr.c ****   * @retval None
 236:../src/usbh_usr.c ****   */
 237:../src/usbh_usr.c **** void USBH_USR_EnumerationDone(void)
 238:../src/usbh_usr.c **** {
 512              		.loc 1 238 0
 513              		.cfi_startproc
 514              		@ args = 0, pretend = 0, frame = 0
 515              		@ frame_needed = 1, uses_anonymous_args = 0
 516 0000 80B5     		push	{r7, lr}
 517              	.LCFI30:
 518              		.cfi_def_cfa_offset 8
 519              		.cfi_offset 14, -4
 520              		.cfi_offset 7, -8
 521 0002 00AF     		add	r7, sp, #0
 522              	.LCFI31:
 523              		.cfi_def_cfa_register 7
 239:../src/usbh_usr.c ****   /* 0.5 seconds delay */
 240:../src/usbh_usr.c ****   USB_OTG_BSP_mDelay(500);
 524              		.loc 1 240 0
 525 0004 4FF4FA70 		mov	r0, #500
 526 0008 FFF7FEFF 		bl	USB_OTG_BSP_mDelay
 241:../src/usbh_usr.c ****   
 242:../src/usbh_usr.c ****   USBH_USR_MSC_Application();
 527              		.loc 1 242 0
 528 000c FFF7FEFF 		bl	USBH_USR_MSC_Application
 243:../src/usbh_usr.c **** } 
 529              		.loc 1 243 0
 530 0010 80BD     		pop	{r7, pc}
 531              		.cfi_endproc
 532              	.LFE122:
 534 0012 00BF     		.section	.text.USBH_USR_DeviceNotSupported,"ax",%progbits
 535              		.align	2
 536              		.global	USBH_USR_DeviceNotSupported
 537              		.thumb
 538              		.thumb_func
 540              	USBH_USR_DeviceNotSupported:
 541              	.LFB123:
 244:../src/usbh_usr.c **** 
 245:../src/usbh_usr.c **** /**
 246:../src/usbh_usr.c ****   * @brief  USBH_USR_DeviceNotSupported
 247:../src/usbh_usr.c ****   *         Device is not supported
 248:../src/usbh_usr.c ****   * @param  None
 249:../src/usbh_usr.c ****   * @retval None
 250:../src/usbh_usr.c ****   */
 251:../src/usbh_usr.c **** void USBH_USR_DeviceNotSupported(void)
 252:../src/usbh_usr.c **** {
 542              		.loc 1 252 0
 543              		.cfi_startproc
 544              		@ args = 0, pretend = 0, frame = 0
 545              		@ frame_needed = 1, uses_anonymous_args = 0
 546              		@ link register save eliminated.
 547 0000 80B4     		push	{r7}
 548              	.LCFI32:
 549              		.cfi_def_cfa_offset 4
 550              		.cfi_offset 7, -4
 551 0002 00AF     		add	r7, sp, #0
 552              	.LCFI33:
 553              		.cfi_def_cfa_register 7
 253:../src/usbh_usr.c **** }
 554              		.loc 1 253 0
 555 0004 BD46     		mov	sp, r7
 556 0006 80BC     		pop	{r7}
 557 0008 7047     		bx	lr
 558              		.cfi_endproc
 559              	.LFE123:
 561 000a 00BF     		.section	.text.USBH_USR_UserInput,"ax",%progbits
 562              		.align	2
 563              		.global	USBH_USR_UserInput
 564              		.thumb
 565              		.thumb_func
 567              	USBH_USR_UserInput:
 568              	.LFB124:
 254:../src/usbh_usr.c **** 
 255:../src/usbh_usr.c **** 
 256:../src/usbh_usr.c **** /**
 257:../src/usbh_usr.c ****   * @brief  USBH_USR_UserInput
 258:../src/usbh_usr.c ****   *         User Action for application state entry
 259:../src/usbh_usr.c ****   * @param  None
 260:../src/usbh_usr.c ****   * @retval USBH_USR_Status : User response for key button
 261:../src/usbh_usr.c ****   */
 262:../src/usbh_usr.c **** USBH_USR_Status USBH_USR_UserInput(void)
 263:../src/usbh_usr.c **** {
 569              		.loc 1 263 0
 570              		.cfi_startproc
 571              		@ args = 0, pretend = 0, frame = 0
 572              		@ frame_needed = 1, uses_anonymous_args = 0
 573              		@ link register save eliminated.
 574 0000 80B4     		push	{r7}
 575              	.LCFI34:
 576              		.cfi_def_cfa_offset 4
 577              		.cfi_offset 7, -4
 578 0002 00AF     		add	r7, sp, #0
 579              	.LCFI35:
 580              		.cfi_def_cfa_register 7
 264:../src/usbh_usr.c ****   /* callback for Key botton: set by software in this case */
 265:../src/usbh_usr.c ****   return USBH_USR_RESP_OK;
 581              		.loc 1 265 0
 582 0004 4FF00103 		mov	r3, #1
 266:../src/usbh_usr.c **** }
 583              		.loc 1 266 0
 584 0008 1846     		mov	r0, r3
 585 000a BD46     		mov	sp, r7
 586 000c 80BC     		pop	{r7}
 587 000e 7047     		bx	lr
 588              		.cfi_endproc
 589              	.LFE124:
 591              		.section	.text.USBH_USR_OverCurrentDetected,"ax",%progbits
 592              		.align	2
 593              		.global	USBH_USR_OverCurrentDetected
 594              		.thumb
 595              		.thumb_func
 597              	USBH_USR_OverCurrentDetected:
 598              	.LFB125:
 267:../src/usbh_usr.c **** 
 268:../src/usbh_usr.c **** /**
 269:../src/usbh_usr.c ****   * @brief  USBH_USR_OverCurrentDetected
 270:../src/usbh_usr.c ****   *         Over Current Detected on VBUS
 271:../src/usbh_usr.c ****   * @param  None
 272:../src/usbh_usr.c ****   * @retval None
 273:../src/usbh_usr.c ****   */
 274:../src/usbh_usr.c **** void USBH_USR_OverCurrentDetected (void)
 275:../src/usbh_usr.c **** {
 599              		.loc 1 275 0
 600              		.cfi_startproc
 601              		@ args = 0, pretend = 0, frame = 0
 602              		@ frame_needed = 1, uses_anonymous_args = 0
 603              		@ link register save eliminated.
 604 0000 80B4     		push	{r7}
 605              	.LCFI36:
 606              		.cfi_def_cfa_offset 4
 607              		.cfi_offset 7, -4
 608 0002 00AF     		add	r7, sp, #0
 609              	.LCFI37:
 610              		.cfi_def_cfa_register 7
 276:../src/usbh_usr.c **** }
 611              		.loc 1 276 0
 612 0004 BD46     		mov	sp, r7
 613 0006 80BC     		pop	{r7}
 614 0008 7047     		bx	lr
 615              		.cfi_endproc
 616              	.LFE125:
 618 000a 00BF     		.section	.text.USBH_USR_MSC_Application,"ax",%progbits
 619              		.align	2
 620              		.global	USBH_USR_MSC_Application
 621              		.thumb
 622              		.thumb_func
 624              	USBH_USR_MSC_Application:
 625              	.LFB126:
 277:../src/usbh_usr.c **** 
 278:../src/usbh_usr.c **** /**
 279:../src/usbh_usr.c ****   * @brief  USBH_USR_MSC_Application
 280:../src/usbh_usr.c ****   * @param  None
 281:../src/usbh_usr.c ****   * @retval Staus
 282:../src/usbh_usr.c ****   */
 283:../src/usbh_usr.c **** int USBH_USR_MSC_Application(void)
 284:../src/usbh_usr.c **** {
 626              		.loc 1 284 0
 627              		.cfi_startproc
 628              		@ args = 0, pretend = 0, frame = 0
 629              		@ frame_needed = 1, uses_anonymous_args = 0
 630 0000 80B5     		push	{r7, lr}
 631              	.LCFI38:
 632              		.cfi_def_cfa_offset 8
 633              		.cfi_offset 14, -4
 634              		.cfi_offset 7, -8
 635 0002 00AF     		add	r7, sp, #0
 636              	.LCFI39:
 637              		.cfi_def_cfa_register 7
 285:../src/usbh_usr.c **** 
 286:../src/usbh_usr.c ****   switch (USBH_USR_ApplicationState)
 638              		.loc 1 286 0
 639 0004 40F20003 		movw	r3, #:lower16:USBH_USR_ApplicationState
 640 0008 C0F20003 		movt	r3, #:upper16:USBH_USR_ApplicationState
 641 000c 1B78     		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 642 000e 002B     		cmp	r3, #0
 643 0010 02D0     		beq	.L21
 644 0012 012B     		cmp	r3, #1
 645 0014 22D0     		beq	.L22
 646 0016 2BE0     		b	.L28
 647              	.L21:
 287:../src/usbh_usr.c ****   {
 288:../src/usbh_usr.c ****     case USH_USR_FS_INIT:
 289:../src/usbh_usr.c **** 
 290:../src/usbh_usr.c ****       /* Initialises the File System*/
 291:../src/usbh_usr.c ****       if (f_mount( 0, &fatfs ) != FR_OK)
 648              		.loc 1 291 0
 649 0018 4FF00000 		mov	r0, #0
 650 001c 40F20001 		movw	r1, #:lower16:fatfs
 651 0020 C0F20001 		movt	r1, #:upper16:fatfs
 652 0024 FFF7FEFF 		bl	f_mount
 653 0028 0346     		mov	r3, r0
 654 002a 002B     		cmp	r3, #0
 655 002c 02D0     		beq	.L23
 292:../src/usbh_usr.c ****       {
 293:../src/usbh_usr.c ****         /* efs initialisation fails*/
 294:../src/usbh_usr.c ****         return(-1);
 656              		.loc 1 294 0
 657 002e 4FF0FF33 		mov	r3, #-1
 658 0032 20E0     		b	.L24
 659              	.L23:
 295:../src/usbh_usr.c ****       }
 296:../src/usbh_usr.c ****       
 297:../src/usbh_usr.c ****       /* Flash Disk is write protected */
 298:../src/usbh_usr.c ****       if (USBH_MSC_Param.MSWriteProtect == DISK_WRITE_PROTECTED)
 660              		.loc 1 298 0
 661 0034 40F20003 		movw	r3, #:lower16:USBH_MSC_Param
 662 0038 C0F20003 		movt	r3, #:upper16:USBH_MSC_Param
 663 003c 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 664 003e 012B     		cmp	r3, #1
 665 0040 04D1     		bne	.L25
 666              	.L26:
 299:../src/usbh_usr.c ****       {
 300:../src/usbh_usr.c ****         while(1)
 301:../src/usbh_usr.c ****         {
 302:../src/usbh_usr.c ****           /* Red LED On */
 303:../src/usbh_usr.c ****           STM_EVAL_LEDOn(LED5);
 667              		.loc 1 303 0 discriminator 1
 668 0042 4FF00200 		mov	r0, #2
 669 0046 FFF7FEFF 		bl	STM_EVAL_LEDOn
 304:../src/usbh_usr.c ****         }
 670              		.loc 1 304 0 discriminator 1
 671 004a FAE7     		b	.L26
 672              	.L25:
 305:../src/usbh_usr.c ****       }
 306:../src/usbh_usr.c ****       /* Go to menu */
 307:../src/usbh_usr.c ****       USBH_USR_ApplicationState = USH_USR_AUDIO;
 673              		.loc 1 307 0
 674 004c 40F20003 		movw	r3, #:lower16:USBH_USR_ApplicationState
 675 0050 C0F20003 		movt	r3, #:upper16:USBH_USR_ApplicationState
 676 0054 4FF00102 		mov	r2, #1
 677 0058 1A70     		strb	r2, [r3, #0]
 308:../src/usbh_usr.c ****       break;
 678              		.loc 1 308 0
 679 005a 0AE0     		b	.L27
 680              	.L22:
 309:../src/usbh_usr.c **** 
 310:../src/usbh_usr.c ****     case USH_USR_AUDIO:
 311:../src/usbh_usr.c **** 
 312:../src/usbh_usr.c ****       /* Go to Audio menu */
 313:../src/usbh_usr.c ****       COMMAND_AudioExecuteApplication();
 681              		.loc 1 313 0
 682 005c FFF7FEFF 		bl	COMMAND_AudioExecuteApplication
 314:../src/usbh_usr.c **** 
 315:../src/usbh_usr.c ****       /* Set user initialization flag */
 316:../src/usbh_usr.c ****       USBH_USR_ApplicationState = USH_USR_FS_INIT;
 683              		.loc 1 316 0
 684 0060 40F20003 		movw	r3, #:lower16:USBH_USR_ApplicationState
 685 0064 C0F20003 		movt	r3, #:upper16:USBH_USR_ApplicationState
 686 0068 4FF00002 		mov	r2, #0
 687 006c 1A70     		strb	r2, [r3, #0]
 317:../src/usbh_usr.c ****       break;
 688              		.loc 1 317 0
 689 006e 00E0     		b	.L27
 690              	.L28:
 318:../src/usbh_usr.c **** 
 319:../src/usbh_usr.c ****     default:
 320:../src/usbh_usr.c ****       break;
 691              		.loc 1 320 0
 692 0070 00BF     		nop
 693              	.L27:
 321:../src/usbh_usr.c ****   }
 322:../src/usbh_usr.c ****   return(0);
 694              		.loc 1 322 0
 695 0072 4FF00003 		mov	r3, #0
 696              	.L24:
 323:../src/usbh_usr.c **** }
 697              		.loc 1 323 0
 698 0076 1846     		mov	r0, r3
 699 0078 80BD     		pop	{r7, pc}
 700              		.cfi_endproc
 701              	.LFE126:
 703 007a 00BF     		.section	.text.COMMAND_AudioExecuteApplication,"ax",%progbits
 704              		.align	2
 705              		.global	COMMAND_AudioExecuteApplication
 706              		.thumb
 707              		.thumb_func
 709              	COMMAND_AudioExecuteApplication:
 710              	.LFB127:
 324:../src/usbh_usr.c **** 
 325:../src/usbh_usr.c **** /**
 326:../src/usbh_usr.c ****   * @brief  COMMAND_AudioExecuteApplication
 327:../src/usbh_usr.c ****   * @param  None
 328:../src/usbh_usr.c ****   * @retval None
 329:../src/usbh_usr.c ****   */
 330:../src/usbh_usr.c **** void COMMAND_AudioExecuteApplication(void)
 331:../src/usbh_usr.c **** {
 711              		.loc 1 331 0
 712              		.cfi_startproc
 713              		@ args = 0, pretend = 0, frame = 0
 714              		@ frame_needed = 1, uses_anonymous_args = 0
 715 0000 80B5     		push	{r7, lr}
 716              	.LCFI40:
 717              		.cfi_def_cfa_offset 8
 718              		.cfi_offset 14, -4
 719              		.cfi_offset 7, -8
 720 0002 00AF     		add	r7, sp, #0
 721              	.LCFI41:
 722              		.cfi_def_cfa_register 7
 332:../src/usbh_usr.c ****   /* Execute the command switch the command index */
 333:../src/usbh_usr.c ****   switch (Command_index)
 723              		.loc 1 333 0
 724 0004 40F20003 		movw	r3, #:lower16:Command_index
 725 0008 C0F20003 		movt	r3, #:upper16:Command_index
 726 000c 1B78     		ldrb	r3, [r3, #0]
 727 000e DBB2     		uxtb	r3, r3
 728 0010 002B     		cmp	r3, #0
 729 0012 02D0     		beq	.L31
 730 0014 012B     		cmp	r3, #1
 731 0016 0BD0     		beq	.L32
 732 0018 14E0     		b	.L35
 733              	.L31:
 334:../src/usbh_usr.c ****   {
 335:../src/usbh_usr.c ****   /* Start Playing from USB Flash memory */
 336:../src/usbh_usr.c ****   case CMD_PLAY:
 337:../src/usbh_usr.c ****     if (RepeatState == 0)
 734              		.loc 1 337 0
 735 001a 40F20003 		movw	r3, #:lower16:RepeatState
 736 001e C0F20003 		movt	r3, #:upper16:RepeatState
 737 0022 1B78     		ldrb	r3, [r3, #0]
 738 0024 DBB2     		uxtb	r3, r3
 739 0026 002B     		cmp	r3, #0
 740 0028 0ED1     		bne	.L36
 338:../src/usbh_usr.c ****       WavePlayerStart();
 741              		.loc 1 338 0
 742 002a FFF7FEFF 		bl	WavePlayerStart
 339:../src/usbh_usr.c ****     break;
 743              		.loc 1 339 0
 744 002e 0BE0     		b	.L36
 745              	.L32:
 340:../src/usbh_usr.c ****     /* Start Recording in USB Flash memory */ 
 341:../src/usbh_usr.c ****   case CMD_RECORD:
 342:../src/usbh_usr.c ****     RepeatState = 0;
 746              		.loc 1 342 0
 747 0030 40F20003 		movw	r3, #:lower16:RepeatState
 748 0034 C0F20003 		movt	r3, #:upper16:RepeatState
 749 0038 4FF00002 		mov	r2, #0
 750 003c 1A70     		strb	r2, [r3, #0]
 343:../src/usbh_usr.c ****     WaveRecorderUpdate();
 751              		.loc 1 343 0
 752 003e FFF7FEFF 		bl	WaveRecorderUpdate
 344:../src/usbh_usr.c ****     break;  
 753              		.loc 1 344 0
 754 0042 02E0     		b	.L29
 755              	.L35:
 345:../src/usbh_usr.c ****   default:
 346:../src/usbh_usr.c ****     break;
 756              		.loc 1 346 0
 757 0044 00BF     		nop
 758 0046 00E0     		b	.L29
 759              	.L36:
 339:../src/usbh_usr.c ****     break;
 760              		.loc 1 339 0
 761 0048 00BF     		nop
 762              	.L29:
 347:../src/usbh_usr.c ****   }
 348:../src/usbh_usr.c **** }
 763              		.loc 1 348 0
 764 004a 80BD     		pop	{r7, pc}
 765              		.cfi_endproc
 766              	.LFE127:
 768              		.section	.text.USBH_USR_DeInit,"ax",%progbits
 769              		.align	2
 770              		.global	USBH_USR_DeInit
 771              		.thumb
 772              		.thumb_func
 774              	USBH_USR_DeInit:
 775              	.LFB128:
 349:../src/usbh_usr.c **** 
 350:../src/usbh_usr.c **** /**
 351:../src/usbh_usr.c ****   * @brief  USBH_USR_DeInit
 352:../src/usbh_usr.c ****   *         Deint User state and associated variables
 353:../src/usbh_usr.c ****   * @param  None
 354:../src/usbh_usr.c ****   * @retval None
 355:../src/usbh_usr.c ****   */
 356:../src/usbh_usr.c **** void USBH_USR_DeInit(void)
 357:../src/usbh_usr.c **** {
 776              		.loc 1 357 0
 777              		.cfi_startproc
 778              		@ args = 0, pretend = 0, frame = 0
 779              		@ frame_needed = 1, uses_anonymous_args = 0
 780              		@ link register save eliminated.
 781 0000 80B4     		push	{r7}
 782              	.LCFI42:
 783              		.cfi_def_cfa_offset 4
 784              		.cfi_offset 7, -4
 785 0002 00AF     		add	r7, sp, #0
 786              	.LCFI43:
 787              		.cfi_def_cfa_register 7
 358:../src/usbh_usr.c ****   USBH_USR_ApplicationState = USH_USR_FS_INIT;
 788              		.loc 1 358 0
 789 0004 40F20003 		movw	r3, #:lower16:USBH_USR_ApplicationState
 790 0008 C0F20003 		movt	r3, #:upper16:USBH_USR_ApplicationState
 791 000c 4FF00002 		mov	r2, #0
 792 0010 1A70     		strb	r2, [r3, #0]
 359:../src/usbh_usr.c **** }
 793              		.loc 1 359 0
 794 0012 BD46     		mov	sp, r7
 795 0014 80BC     		pop	{r7}
 796 0016 7047     		bx	lr
 797              		.cfi_endproc
 798              	.LFE128:
 800              		.text
 801              	.Letext0:
 802              		.file 2 "c:\\program files (x86)\\codesourcery\\sourcery_codebench_lite_for_arm_eabi\\bin\\../lib/
 803              		.file 3 "C:\\Users\\Anthony.Paterson@opus.co\\Documents\\git\\blink\\blink\\Libraries\\CMSIS\\ST\\
 804              		.file 4 "C:\\Users\\Anthony.Paterson@opus.co\\Documents\\git\\blink\\blink\\Utilities\\Third_Party
 805              		.file 5 "C:\\Users\\Anthony.Paterson@opus.co\\Documents\\git\\blink\\blink\\Utilities\\Third_Party
 806              		.file 6 "C:\\Users\\Anthony.Paterson@opus.co\\Documents\\git\\blink\\blink\\Utilities\\STM32F4-Dis
 807              		.file 7 "C:\\Users\\Anthony.Paterson@opus.co\\Documents\\git\\blink\\blink\\Libraries\\STM32_USB_H
 808              		.file 8 "C:\\Users\\Anthony.Paterson@opus.co\\Documents\\git\\blink\\blink\\Libraries\\STM32_USB_H
 809              		.file 9 "C:\\Users\\Anthony.Paterson@opus.co\\Documents\\git\\blink\\blink\\Libraries\\STM32_USB_H
 810              		.file 10 "C:\\Users\\Anthony.Paterson@opus.co\\Documents\\git\\blink\\blink\\Libraries\\CMSIS\\Inc
DEFINED SYMBOLS
                            *ABS*:00000000 usbh_usr.c
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:22     .bss.Command_index:00000000 Command_index
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:23     .bss.Command_index:00000000 $d
                            *COM*:00000430 fatfs
                            *COM*:00000424 file
                            *COM*:00000424 fileR
                            *COM*:0000001c dir
                            *COM*:00000018 fno
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:34     .data.USR_Callbacks:00000000 USR_Callbacks
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:31     .data.USR_Callbacks:00000000 $d
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:76     .text.USBH_USR_Init:00000000 USBH_USR_Init
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:774    .text.USBH_USR_DeInit:00000000 USBH_USR_DeInit
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:104    .text.USBH_USR_DeviceAttached:00000000 USBH_USR_DeviceAttached
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:261    .text.USBH_USR_ResetDevice:00000000 USBH_USR_ResetDevice
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:178    .text.USBH_USR_DeviceDisconnected:00000000 USBH_USR_DeviceDisconnected
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:597    .text.USBH_USR_OverCurrentDetected:00000000 USBH_USR_OverCurrentDetected
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:288    .text.USBH_USR_DeviceSpeedDetected:00000000 USBH_USR_DeviceSpeedDetected
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:321    .text.USBH_USR_Device_DescAvailable:00000000 USBH_USR_Device_DescAvailable
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:353    .text.USBH_USR_DeviceAddressAssigned:00000000 USBH_USR_DeviceAddressAssigned
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:380    .text.USBH_USR_Configuration_DescAvailable:00000000 USBH_USR_Configuration_DescAvailable
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:414    .text.USBH_USR_Manufacturer_String:00000000 USBH_USR_Manufacturer_String
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:446    .text.USBH_USR_Product_String:00000000 USBH_USR_Product_String
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:478    .text.USBH_USR_SerialNum_String:00000000 USBH_USR_SerialNum_String
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:510    .text.USBH_USR_EnumerationDone:00000000 USBH_USR_EnumerationDone
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:567    .text.USBH_USR_UserInput:00000000 USBH_USR_UserInput
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:624    .text.USBH_USR_MSC_Application:00000000 USBH_USR_MSC_Application
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:540    .text.USBH_USR_DeviceNotSupported:00000000 USBH_USR_DeviceNotSupported
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:151    .text.USBH_USR_UnrecoveredError:00000000 USBH_USR_UnrecoveredError
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:57     .bss.joystick_use:00000000 joystick_use
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:58     .bss.joystick_use:00000000 $d
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:63     .bss.lcdLineNo:00000000 lcdLineNo
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:64     .bss.lcdLineNo:00000000 $d
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:68     .bss.USBH_USR_ApplicationState:00000000 USBH_USR_ApplicationState
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:69     .bss.USBH_USR_ApplicationState:00000000 $d
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:71     .text.USBH_USR_Init:00000000 $t
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:99     .text.USBH_USR_DeviceAttached:00000000 $t
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:146    .text.USBH_USR_UnrecoveredError:00000000 $t
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:173    .text.USBH_USR_DeviceDisconnected:00000000 $t
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:256    .text.USBH_USR_ResetDevice:00000000 $t
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:283    .text.USBH_USR_DeviceSpeedDetected:00000000 $t
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:316    .text.USBH_USR_Device_DescAvailable:00000000 $t
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:348    .text.USBH_USR_DeviceAddressAssigned:00000000 $t
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:375    .text.USBH_USR_Configuration_DescAvailable:00000000 $t
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:409    .text.USBH_USR_Manufacturer_String:00000000 $t
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:441    .text.USBH_USR_Product_String:00000000 $t
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:473    .text.USBH_USR_SerialNum_String:00000000 $t
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:505    .text.USBH_USR_EnumerationDone:00000000 $t
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:535    .text.USBH_USR_DeviceNotSupported:00000000 $t
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:562    .text.USBH_USR_UserInput:00000000 $t
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:592    .text.USBH_USR_OverCurrentDetected:00000000 $t
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:619    .text.USBH_USR_MSC_Application:00000000 $t
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:709    .text.COMMAND_AudioExecuteApplication:00000000 COMMAND_AudioExecuteApplication
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:704    .text.COMMAND_AudioExecuteApplication:00000000 $t
C:\Users\ANTHON~1.CO\AppData\Local\Temp\ccAG9Brw.s:769    .text.USBH_USR_DeInit:00000000 $t
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
RepeatState
LED_Toggle
STM_EVAL_LEDOff
STM_EVAL_LEDOn
TIM_ITConfig
WaveDataLength
WavePlayer_CallBack
WaveRecorderStop
Time_Rec_Base
USB_OTG_BSP_mDelay
f_mount
USBH_MSC_Param
WavePlayerStart
WaveRecorderUpdate
